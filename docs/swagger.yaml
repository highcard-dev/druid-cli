definitions:
  CommandInstructionSet:
    properties:
      procedures:
        items:
          $ref: '#/definitions/Procedure'
        type: array
      should_change_status:
        type: string
    type: object
  Procedure:
    properties:
      data: {}
      mode:
        type: string
    type: object
  ProcessCommand:
    properties:
      commands:
        additionalProperties:
          $ref: '#/definitions/CommandInstructionSet'
        type: object
    type: object
  ProcessMonitorMetrics:
    properties:
      connections:
        items:
          type: string
        type: array
      cpu:
        type: number
      memory:
        type: integer
      pid:
        type: integer
    type: object
  ProcessMonitorMetricsMap:
    additionalProperties:
      $ref: '#/definitions/ProcessMonitorMetrics'
    type: object
  ProcessTreeNode:
    properties:
      children:
        items:
          $ref: '#/definitions/ProcessTreeNode'
        type: array
      cmdline:
        type: string
      cpu_percent:
        type: number
      gids:
        items:
          type: integer
        type: array
      io_counters:
        $ref: '#/definitions/process.IOCountersStat'
      memory:
        $ref: '#/definitions/process.MemoryInfoStat'
      memory_ex:
        $ref: '#/definitions/process.MemoryInfoExStat'
      name:
        type: string
      process:
        $ref: '#/definitions/process.Process'
      username:
        type: string
    type: object
  ProcessTreeRoot:
    properties:
      root:
        $ref: '#/definitions/ProcessTreeNode'
      total_cpu_percent:
        type: number
      total_io_counters_read:
        type: integer
      total_io_counters_write:
        type: integer
      total_memory_rss:
        type: integer
      total_memory_swap:
        type: integer
      total_memory_vms:
        type: integer
      total_process_count:
        type: integer
    type: object
  PsTreeMap:
    additionalProperties:
      $ref: '#/definitions/ProcessTreeRoot'
    type: object
  ScrollFile:
    properties:
      app_version:
        type: string
      desc:
        type: string
      init:
        type: string
      name:
        type: string
      plugins:
        additionalProperties:
          additionalProperties:
            type: string
          type: object
        type: object
      processes:
        additionalProperties:
          $ref: '#/definitions/ProcessCommand'
        type: object
      version:
        $ref: '#/definitions/semver.Version'
    type: object
  ScrollLogStream:
    properties:
      key:
        type: string
      log:
        items:
          $ref: '#/definitions/domain.StreamCommand'
        type: array
    required:
    - key
    - log
    type: object
  WebsocketToken:
    properties:
      token:
        type: string
    required:
    - token
    type: object
  domain.StreamCommand:
    properties:
      data:
        type: string
      stream:
        type: string
      type:
        type: string
    type: object
  handler.StartProcedureRequestBody:
    properties:
      data:
        type: string
      mode:
        type: string
      process:
        type: string
      sync:
        type: boolean
    type: object
  handler.StartScrollRequestBody:
    properties:
      command:
        type: string
      process:
        type: string
      sync:
        type: boolean
    type: object
  process.IOCountersStat:
    properties:
      readBytes:
        type: integer
      readCount:
        type: integer
      writeBytes:
        type: integer
      writeCount:
        type: integer
    type: object
  process.MemoryInfoExStat:
    type: object
  process.MemoryInfoStat:
    properties:
      data:
        description: bytes
        type: integer
      hwm:
        description: bytes
        type: integer
      locked:
        description: bytes
        type: integer
      rss:
        description: bytes
        type: integer
      stack:
        description: bytes
        type: integer
      swap:
        description: bytes
        type: integer
      vms:
        description: bytes
        type: integer
    type: object
  process.Process:
    properties:
      pid:
        type: integer
    type: object
  semver.Version:
    type: object
info:
  contact: {}
paths:
  /api/v1/command:
    post:
      consumes:
      - '*/*'
      operationId: runCommand
      parameters:
      - description: Scroll Body
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/handler.StartScrollRequestBody'
      produces:
      - application/json
      responses:
        "200":
          description: OK
        "201":
          description: Created
        "400":
          description: Bad Request
        "500":
          description: Internal Server Error
      summary: Get current scroll
      tags:
      - scroll
      - druid
      - daemon
  /api/v1/logs:
    get:
      consumes:
      - '*/*'
      operationId: listLogs
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/ScrollLogStream'
            type: array
      summary: List all logs
      tags:
      - logs
      - druid
      - daemon
  /api/v1/logs/:stream:
    get:
      consumes:
      - '*/*'
      operationId: listLog
      parameters:
      - description: Stream name
        in: path
        name: stream
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ScrollLogStream'
      summary: List stream logs
      tags:
      - logs
      - druid
      - daemon
  /api/v1/metrics:
    get:
      consumes:
      - application/json
      description: Get the metrics for all processes.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ProcessMonitorMetricsMap'
      summary: Get all process metrics
      tags:
      - metrics
      - druid
      - daemon
  /api/v1/procedure:
    post:
      consumes:
      - '*/*'
      operationId: runProcedure
      parameters:
      - description: Procedure Body
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/handler.StartProcedureRequestBody'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: object
        "201":
          description: Created
      summary: Run procedure
      tags:
      - scroll
      - druid
      - daemon
  /api/v1/pstree:
    get:
      consumes:
      - application/json
      description: Get pstree of running process
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/PsTreeMap'
      summary: Get all process metrics
      tags:
      - metrics
      - druid
      - daemon
  /api/v1/scroll:
    get:
      consumes:
      - '*/*'
      operationId: getScroll
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/ScrollFile'
      summary: Get current scroll
      tags:
      - scroll
      - druid
      - daemon
  /api/v1/token:
    get:
      consumes:
      - application/json
      description: Get the metrics for all processes.
      operationId: createToken
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/WebsocketToken'
      summary: Get current scroll
      tags:
      - websocket
      - druid
      - daemon
swagger: "2.0"
